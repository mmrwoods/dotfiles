if [ -e /usr/share/terminfo/x/xterm-256color ]; then
  export TERM='xterm-256color'
else
  export TERM='xterm-color'
fi

export CLICOLOR=1
export LSCOLORS=ExFxCxDxBxEgedabagacad

# bash-completion for OSX
if [ $SHELL = "/bin/bash" ]; then
  if [ -f /opt/local/etc/bash_completion ]; then
      . /opt/local/etc/bash_completion
  fi
  type __git_ps1 >& /dev/null
  if [ $? -ne 0 ]; then
    source ~/dotfiles/bash/git-completion.sh
  fi
fi

# use gnome-open rather than openvt
if [ `which gnome-open` ]; then
  alias open="gnome-open"
fi

# because I keep forgetting how to do it in Linux
if [ ! `which pbcopy` ] && [ `which xclip` ]; then
  alias pbcopy="xclip -selection clipboard"
  alias pbpaste="xclip -o -selection clipboard"
fi

export PS1='\u@\h \W$(__git_ps1 "[%s]")\$ '

# if some kind of xterm, use prompt command to set window title
if [ "${TERM%%-*}" == xterm ]; then
  export PROMPT_COMMAND='echo -ne "\033]0;${PWD/#$HOME/~}\007"'
fi

set -o vi

alias egrep='egrep --color=auto'
alias fgrep='fgrep --color=auto'
alias grep='grep --color=auto'

alias be='bundle exec'
alias hs='history'

# current gems dir (works with rvm and bundler)
gems() {
  bundle list > /dev/null
  eval $(
    if [ $? -eq 0 ]; then
      echo "bundle exec "
    fi
    echo "gem env | fgrep -A 1 'GEM PATHS' | awk 'NR==2' | sed 's/[^/]*//'"
  )
}
